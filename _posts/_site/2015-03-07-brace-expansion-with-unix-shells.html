<p>Recently, I discovered a great feature that most of recent <a href="https://en.wikipedia.org/wiki/Unix_shell">Shells</a> support. It is named <em>brace expansion</em>. I used it occasionally but without knowing how it behaves and what was its power.</p>

<p>Below is an example:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">echo </span>I<span class="o">{</span>like,love,hate<span class="o">}</span>chocolate
Ilikechocolate Ilovechocolate Ihatechocolate</code></pre></figure>

<!--more-->

<p>In this example, <code class="highlighter-rouge"><span class="p">{</span><span class="err">like,love,hate</span><span class="p">}</span></code> has a special meaning: it’s a list of String elements delimited by braces whose elements are expanded with the word it is attached with. As the output shows, once evaluated each String element creates a new word by replacing the list by its value.</p>

<p>Ok, that’s interesting but could it be used with a concrete example? the answer is yes. Let’s say that you need to create several folders in a same directory. The simplest manner I was aware of was to move to the desired folder and then to use the <code class="highlighter-rouge">mkdir</code> command for each directory:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">cd</span> ~
<span class="gp">$ </span>mkdir -p Images
<span class="gp">$ </span>mkdir -p Movies
<span class="gp">$ </span>mkdir -p Music</code></pre></figure>

<p>The previous sequence of commands can be written pretty quickly but requires fingers gymnastic using keyboard shortcuts. With brace expansion, the previous example can be easily one-lined:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>mkdir -p ~/<span class="o">{</span>Images,Movies,Music<span class="o">}</span></code></pre></figure>

<h1 id="nested-brace-expansion">Nested brace expansion</h1>

<p>Brace lists can be composed. For instance, the example above can be extended to create a hierarchy of folders quickly:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>mkdir -p ~/<span class="o">{</span>Images/<span class="o">{</span>Cars,Family,House,Vacations<span class="o">}</span>,Movies,Music<span class="o">}</span></code></pre></figure>

<p>It will create the following folders in your home directory:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Images/Cars
Images/Family
Images/House
Images/Vacations
Movies
Music</code></pre></figure>

<h1 id="generating-sequences">Generating sequences</h1>

<p>If you come from the imperative world (e.g. if you know for instance C or even used loops with Java), you are probably familiar with the 3 parameters loop control expression. You also know how boring it is to write, especially in Shell:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span>1; i&lt;<span class="o">=</span>3; i++<span class="o">))</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done
</span>1
2
3</code></pre></figure>

<p>Using brace sequences, the writing is shorter and more readable:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="k">for </span>i <span class="k">in</span> <span class="o">{</span>1..3<span class="o">}</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done</span></code></pre></figure>

<p>The general syntax for a sequence expression is <code class="highlighter-rouge"><span class="p">{</span><span class="err">START..END..INCREMENT</span><span class="p">}</span></code> where <em>START</em> and <em>END</em> is a required integer or single character but <em>INCREMENT</em> an optional integer value (default to 1). Such an expression generates a sequence of integers or characters by <em>INCREMENT</em> step, starting from <em>START</em> to <em>END</em> included. This way, listing odd numbers between <em>9</em> and <em>17</em> is as simple as writing:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">echo</span> <span class="o">{</span>9..17..2<span class="o">}</span>
9 11 13 15 17</code></pre></figure>

<p>While enumerating the alphabet is not more complex:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">echo</span> <span class="o">{</span>a..z<span class="o">}</span>
a b c d e f g h i j k l m n o p q r s t u v w x y z</code></pre></figure>

<h1 id="limitations">Limitations</h1>

<ol>
  <li>A valid brace expansion must contain at least a comma or a sequence expression.</li>
  <li>Variable expansion works inside a brace list but not inside a sequence expression.</li>
</ol>

<p>In conclusion, brace expansion is a really powerful feature that can save you time when you have to create directories, apply permissions, etc. Besides, the good news is that it is supported by almost all recent Shells.</p>
