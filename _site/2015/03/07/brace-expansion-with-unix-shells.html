<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Laurent Pellegrino">
  <meta name="theme-color" content="#284a5e">
  <title>Brace expansion with Unix Shells</title>
  <meta name="description" content="Recently, I discovered a great feature that most of recent Shells support. It is named brace expansion. I used it occasionally but without knowing how it beh...">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.pellegrino.link/2015/03/07/brace-expansion-with-unix-shells.html">
  <link rel="alternate" type="application/rss+xml" title="Laurent Pellegrino" href="http://www.pellegrino.link/feed.xml">
</head>

<body>
	<div id="container">
		<div id="row">
			<header id="sidebar">
  <a href="/"/>
    <img src="/images/giraffe.png" class="avatar" alt="Cartoon giraffe" />
  </a>

  <h1>
    <strong>I am Laurent</strong>, an R&amp;D Engineer <br /> working at <a href="http://www.activeeon.com" title="ActiveEon - Scale Beyond Limits">ActiveEon</a> in French Riviera
  </h1>

  <nav class="site-nav vspace">
    <a href="/" class="navlink">Blog</a>
    <span style="font-size: 10px;">&nbsp;&bull;&nbsp;</span>
    <a href="/archives" class="navlink">Archives</a>
    <span style="font-size: 10px;">&nbsp;&bull;&nbsp;</span>
    <a href="/about" class="navlink">About</a>
  </nav>

  <ul class="icons vspace">
    <li><a href="http://linkedin.pellegrino.link" class="icon fa-linkedin" title="Linkedin profile"><span class="label">Linkedin</span></a></li>
    <li><a href="https://github.com/lpellegr" class="icon fa-github" title="Github profile"><span class="label">Github</span></a></li>
    <li><a href="http://stackoverflow.com/users/269447/laurent" class="icon fa-stack-overflow" title="Stackoverflow profile"><span class="label">Stack Overflow</span></a></li>
    <li><a href="http://www.google.com/recaptcha/mailhide/d?k=01aQ9xMzKtmiI_QFsoA7_5cw==&amp;c=tRqec_6YI_OyihG21CXPRw7EZ3YIpLSQjW_ZCODLh0s=" onclick="window.open('http://www.google.com/recaptcha/mailhide/d?k\07501aQ9xMzKtmiI_QFsoA7_5cw\75\75\46c\75tRqec_6YI_OyihG21CXPRw7EZ3YIpLSQjW_ZCODLh0s\075', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;" title="Reveal this e-mail address" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
  </ul>
</header>

			<section id="page-content">
				<div id="content">
					<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <p class="post-meta"><time datetime="2015-03-07T00:00:00+01:00" itemprop="datePublished">Mar 7, 2015</time></p>
    <h1 class="post-title" itemprop="name headline">Brace expansion with Unix Shells</h1>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Recently, I discovered a great feature that most of recent <a href="https://en.wikipedia.org/wiki/Unix_shell">Shells</a> support. It is named <em>brace expansion</em>. I used it occasionally but without knowing how it behaves and what was its power.</p>

<p>Below is an example:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">echo </span>I<span class="o">{</span>like,love,hate<span class="o">}</span>chocolate
Ilikechocolate Ilovechocolate Ihatechocolate</code></pre></figure>

<!--more-->

<p>In this example, <code>{like,love,hate}</code> has a special meaning: it&#39;s a list of String elements delimited by braces whose elements are expanded with the word it is attached with. As the output shows, once evaluated each String element creates a new word by replacing the list by its value.</p>

<p>Ok, that&#39;s interesting but could it be used with a concrete example? the answer is yes. Let&#39;s say that you need to create several folders in a same directory. The simplest manner I was aware of was to move to the desired folder and then to use the <code>mkdir</code> command for each directory:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">cd</span> ~
<span class="gp">$ </span>mkdir -p Images
<span class="gp">$ </span>mkdir -p Movies
<span class="gp">$ </span>mkdir -p Music</code></pre></figure>

<p>The previous sequence of commands can be written pretty quickly but requires fingers gymnastic using keyboard shortcuts. With brace expansion, the previous example can be easily one-lined:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>mkdir -p ~/<span class="o">{</span>Images,Movies,Music<span class="o">}</span></code></pre></figure>

<h1 id="nested-brace-expansion">Nested brace expansion</h1>

<p>Brace lists can be composed. For instance, the example above can be extended to create a hierarchy of folders quickly:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>mkdir -p ~/<span class="o">{</span>Images/<span class="o">{</span>Cars,Family,House,Vacations<span class="o">}</span>,Movies,Music<span class="o">}</span></code></pre></figure>

<p>It will create the following folders in your home directory:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Images/Cars
Images/Family
Images/House
Images/Vacations
Movies
Music</code></pre></figure>

<h1 id="generating-sequences">Generating sequences</h1>

<p>If you come from the imperative world (e.g. if you know for instance C or even used loops with Java), you are probably familiar with the 3 parameters loop control expression. You also know how boring it is to write, especially in Shell:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span>1; i&lt;<span class="o">=</span>3; i++<span class="o">))</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done
</span>1
2
3</code></pre></figure>

<p>Using brace sequences, the writing is shorter and more readable:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="k">for </span>i <span class="k">in</span> <span class="o">{</span>1..3<span class="o">}</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done</span></code></pre></figure>

<p>The general syntax for a sequence expression is <code>{START..END..INCREMENT}</code> where <em>START</em> and <em>END</em> is a required integer or single character but <em>INCREMENT</em> an optional integer value (default to 1). Such an expression generates a sequence of integers or characters by <em>INCREMENT</em> step, starting from <em>START</em> to <em>END</em> included. This way, listing odd numbers between <em>9</em> and <em>17</em> is as simple as writing:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">echo</span> <span class="o">{</span>9..17..2<span class="o">}</span>
9 11 13 15 17</code></pre></figure>

<p>While enumerating the alphabet is not more complex:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span><span class="nb">echo</span> <span class="o">{</span>a..z<span class="o">}</span>
a b c d e f g h i j k l m n o p q r s t u v w x y z</code></pre></figure>

<h1 id="limitations">Limitations</h1>

<ol>
<li>A valid brace expansion must contain at least a comma or a sequence expression.</li>
<li>Variable expansion works inside a brace list but not inside a sequence expression.</li>
</ol>

<p>In conclusion, brace expansion is a really powerful feature that can save you time when you have to create directories, apply permissions, etc. Besides, the good news is that it is supported by almost all recent Shells.</p>

  </div>

  <div itemprop="keywords">
    Tags:
    
      <a href="http://www.google.com/search?q=Brace expansion&btnI=I%27m%20feeling%20lucky">Brace expansion</a>, 
    
      <a href="http://www.google.com/search?q=Bash&btnI=I%27m%20feeling%20lucky">Bash</a>, 
    
      <a href="http://www.google.com/search?q=Csh&btnI=I%27m%20feeling%20lucky">Csh</a>, 
    
      <a href="http://www.google.com/search?q=Ksh&btnI=I%27m%20feeling%20lucky">Ksh</a>, 
    
      <a href="http://www.google.com/search?q=Shell&btnI=I%27m%20feeling%20lucky">Shell</a>
    
  </div>
</article>





<div id="disqus_thread"></div>
<script type="text/javascript">
        var disqus_shortname = 'lpellegr';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



				</div>
			</section>
		</div>
	</div>
	<script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-59741838-1', 'auto');
	ga('send', 'pageview');
  </script>
</body>
</html>
